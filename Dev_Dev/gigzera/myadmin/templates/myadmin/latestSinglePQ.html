{% extends 'myadmin/ad_base2.html' %} {% load static %}
<!-- title -->
{% block title %}Latest Project Quotes{% endblock %}
<!-- CSS -->
{% block css %}
<link rel="stylesheet" href="{% static 'css/ad_latestSinglePQ.css' %}" />
<!-- <link rel="stylesheet" href="{% static 'css/tailwind.css' %}" /> -->
{% endblock %}
<!-- main content -->
{% block content %}
<div class="h-full text-base-content">
  <div class="mn_ctr bg-gray-50">
    <!-- Action Buttons -->
    <div class="flex justify-between items-center mb-8">
      <button
        class="bg-white px-4 py-2 rounded-lg shadow hover:shadow-md"
        onclick="window.location.href='../html/admin (multiple) view for project.html';"
      >
        <i class="fa-solid fa-arrow-left mr-2"></i>Back to Bids
      </button>
      <div class="space-x-3">
        <button
          id="reject-btn"
          class="bg-red-50 text-red-600 px-4 py-2 rounded-lg hover:bg-red-100"
        >
          <i class="fa-solid fa-ban mr-2"></i>Reject
        </button>
        <button
          id="approve-btn"
          class="bg-green-50 text-green-600 px-4 py-2 rounded-lg hover:bg-green-100"
        >
          <i class="fa-solid fa-check mr-2"></i>Provide to client
        </button>
      </div>
    </div>
    <!-- <div class="action-buttons">
        <button id="reject-btn" class="btn reject">X Reject</button>
        <button id="approve-btn" class="btn approve">
          ✓ Provide to client
        </button>
      </div> -->

    <!-- Container -->
    <div class="container">
      <!-- Project Overview -->
      <div class="card project-overview">
        <h2>Project Overview</h2>
        <p><strong>Project Name:</strong> E-commerce Website Development</p>
        <p><strong>Opportunity ID:</strong> #OP2025001</p>
        <p><strong>Deliverables:</strong></p>
        <ul>
          <li>Frontend Development</li>
          <li>Backend Integration</li>
          <li>Payment Gateway</li>
        </ul>
        <p><strong>Required Skills:</strong></p>
        <div>
          <span class="skills">React.js</span>
          <span class="skills">Node.js</span>
          <span class="skills">MongoDB</span>
        </div>
        <p><strong>Budget:</strong> $15,000 – $20,000</p>
        <p><strong>Timeline:</strong> 1-2 Months</p>
      </div>

      <!-- Bidder Profile -->
      <div class="card bidder-profile">
        <h2>Bidder Profile</h2>
        <p><strong>User ID:</strong> #UID78945</p>
        <p><strong>Username:</strong> *********</p>
        <a href="{% url 'ad_profileView' %}" class="view-profile"
          >View Profile</a
        >
        <p>
          <strong>Professional Summary:</strong> Senior Full Stack Developer
          with expertise in modern web technologies and e-commerce solutions.
        </p>
        <p><strong>Total Experience:</strong> 8 Years</p>
        <p><strong>Total Completed projects:</strong> 2</p>
        <p><strong>Skills Experience:</strong></p>
        <ul>
          <li>React.js: 5 years</li>
          <li>Node.js: 4 years</li>
          <li>MongoDB: 3 years</li>
        </ul>
        <p><strong>Certifications:</strong></p>
        <ul>
          <li>AWS Certified Developer</li>
          <li>MongoDB Certified Developer</li>
        </ul>
      </div>

      <!-- Bid Details -->
      <div class="card bid-details">
        <h2>Bid Details</h2>
        <p><strong>Proposed Budget:</strong> $18,500</p>
        <p>
          <strong>Consulting Charges:</strong>
          <button id="proposed-budget" class="budget-button">$500</button>
          <button id="edit-button" class="edit-button">
            <i class="fa-solid fa-pen-to-square edit-icon"></i>
          </button>
        </p>
        <p><strong>Proposed Timeline:</strong> 1 Month</p>
        <p><strong>Additional Comments:</strong></p>
        <p>
          I have extensive experience in developing e-commerce platforms with
          similar requirements. I can start immediately and ensure timely
          delivery with high-quality code.
        </p>
      </div>
    </div>
  </div>
  <!-- Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <p id="modal-message"></p>
      <button id="modal-close-btn">Close</button>
    </div>
  </div>
</div>
{% endblock %}
<!-- JS -->
{% block js %}
<script>
  const rejectBtn = document.getElementById("reject-btn");
  const approveBtn = document.getElementById("approve-btn");
  const modal = document.getElementById("modal");
  const modalMessage = document.getElementById("modal-message");
  const modalCloseBtn = document.getElementById("modal-close-btn");

  // Show modal on button click
  rejectBtn.addEventListener("click", () => {
    modalMessage.textContent = "Action: Rejected";
    modal.style.display = "flex";
  });

  approveBtn.addEventListener("click", () => {
    modalMessage.textContent = "Action: Approved";
    modal.style.display = "flex";
  });

  // Close modal
  modalCloseBtn.addEventListener("click", () => {
    modal.style.display = "none";
  });

  // Edit proposed budget
  const editButton = document.getElementById("edit-button");
  let proposedBudget = document.getElementById("proposed-budget"); // Initial reference to proposed-budget button

  editButton.addEventListener("click", () => {
    console.log("I am in");

    // Create an input field
    const budgetInput = document.createElement("input");
    budgetInput.type = "text";
    budgetInput.value = proposedBudget.textContent.trim().replace("$", ""); // Remove '$' sign
    proposedBudget.replaceWith(budgetInput); // Replace the button with the input field
    budgetInput.focus();

    // Update the proposed budget when the input field loses focus
    budgetInput.addEventListener("blur", () => {
      const newValue = `$${budgetInput.value}`;
      const newButton = document.createElement("button");
      newButton.id = "proposed-budget"; // Keep the button id
      newButton.className = "budget-button"; // Keep the button class
      newButton.textContent = newValue;

      budgetInput.replaceWith(newButton); // Replace input with the updated button
      proposedBudget = newButton; // Update the reference to the new button
    });

    // Allow updating by pressing Enter
    budgetInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        budgetInput.blur();
      }
    });
  });
</script>
<!-- <script src="{% static 'js/ad_index.js' %}"></script> -->
{% endblock %}
