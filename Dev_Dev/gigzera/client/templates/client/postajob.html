{% extends 'basic.html' %} {% load static %}
<!-- title -->
{% block title %}Post a Job{% endblock %}
<!-- css -->
{% block css %}
<link rel="stylesheet" href="{% static 'css/tailwind.css' %}" />
<link rel="stylesheet" href="{% static 'css/cl_postajob.css' %}" />
{% endblock %}
<!-- content -->
{% block content %}
<section class="text-section">
  <!-- First Slide -->
  <div class="slide">
    <img
      src="https://cdn.yellowmessenger.com/PSpMKlSDepdi1735210401540.png"
      alt="City View"
      class="city-image"
    />
  </div>

  <!-- Second Slide -->
  <div class="slide">
    <img
      src="https://cdn.yellowmessenger.com/awWcKeyMtYYX1735210522831.png"
      alt="Boost Your Team"
      class="city-image"
    />
  </div>

  <!-- Third Slide -->
  <div class="slide">
    <img
      src="https://cdn.yellowmessenger.com/WNC3rncek4B61735210555680.png"
      alt="Post Your Jobs"
      class="city-image"
    />
  </div>

  <!-- Fourth Slide -->
  <div class="slide">
    <img
      src="https://cdn.yellowmessenger.com/ePnzGFUzrasA1735210652173.png"
      alt="Post Your Jobs"
      class="city-image"
    />
  </div>

  <!-- Fifth Slide -->
  <div class="slide">
    <img
      src="https://cdn.yellowmessenger.com/tVydGqHwo3Le1735210676452.png"
      alt="Post Your Jobs"
      class="city-image"
    />
  </div>

  <!-- Sixth Slide -->
  <div class="slide">
    <img
      src="https://cdn.yellowmessenger.com/r6jrnKSConXC1735210701475.png"
      alt="Post Your Jobs"
      class="city-image"
    />
  </div>
</section>
<script>
  // Select all slides
  const slides = document.querySelectorAll(".slide");
  let currentSlide = 0; // Start with the first slide

  // Function to show a slide
  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.toggle("active", i === index); // Add 'active' class to the current slide
    });
  }

  // Function to start the slideshow
  function startSlideshow() {
    setInterval(() => {
      currentSlide = (currentSlide + 1) % slides.length; // Cycle through slides
      showSlide(currentSlide);
    }, 5000); // Change slide every 5 seconds
  }

  // Initialize slideshow
  showSlide(currentSlide);
  startSlideshow();
</script>

<!-- Modal HTML Structure -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-body">
        <div class="form-container">
          <div class="form-header">
            <h2 style="display: inline-block">Post a Job</h2>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
              style="float: right"
            ></button>
          </div>
          <form class="form-content">
            <label for="project-type">Project Type</label>
            <select id="project-type">
              <option>Gig (Single Freelancer)</option>
              <option>Project (Multiple Freelancers)</option>
            </select>

            <label for="project-title">Project Title</label>
            <input
              type="text"
              id="project-title"
              placeholder="Enter project title"
            />

            <label for="skills-required">Skills Required</label>
            <div id="skills-container">
              <input
                type="text"
                id="skills-required"
                placeholder="Add skills"
              />
              <ul id="suggestions-list" class="suggestions-list"></ul>
            </div>
            <div id="selected-skills" class="selected-skills"></div>

            <label for="project-description">Project Description</label>
            <textarea
              id="project-description"
              rows="4"
              placeholder="Describe your project"
            ></textarea>

            <div class="form-group">
              <div class="select-container">
                <label for="currency">Currency</label>
                <select id="currency">
                  <option>USD</option>
                  <option>EUR</option>
                  <option>GBP</option>
                </select>
              </div>

              <div class="select-container">
                <label for="budget-range">Budget Range</label>
                <select id="budget-range">
                  <option>1,000 - 5,000</option>
                  <option>5,000 - 10,000</option>
                  <option>10,000 - 20,000</option>
                </select>
              </div>
            </div>

            <label for="deliverables">Project Deliverables</label>
            <input
              type="text"
              id="deliverables"
              placeholder="Add deliverables"
            />

            <label for="candidate-details">Preffered Candidate profile</label>
            <textarea
              id="candidate-details"
              rows="3"
              placeholder="Describe ideal candidate"
            ></textarea>

            <label for="challenges">Possible Challenges</label>
            <textarea
              id="challenges"
              rows="3"
              placeholder="List potential challenges"
            ></textarea>

            <label for="time-zone">Preferred Time Zone</label>
            <select id="time-zone">
              <option>UTC-8 (PST)</option>
              <option>UTC-5 (EST)</option>
              <option>UTC+1 (CET)</option>
            </select>

            <button type="button" onclick="submitJobPost()">Post Job</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Pop-up for skill selection -->
<div id="popup">
  <div class="popup-header">
    <h3>Select Skills</h3>
    <span class="close" onclick="closePopup()">×</span>
  </div>
  <div id="popup-content">
    <!-- Skills list will be shown here -->
  </div>
</div>

<script>
  const skillsInput = document.getElementById("skills-required");
  const suggestionsList = document.getElementById("suggestions-list");
  const selectedSkillsContainer = document.getElementById("selected-skills");
  const availableSkills = [
    "JavaScript",
    "Python",
    "React",
    "Node.js",
    "Angular",
    "Django",
    "HTML",
    "CSS",
    "Java",
    "C++",
    "Ruby",
    "SQL",
    "TypeScript",
  ];
  let selectedSkills = [];

  // Show suggestions based on input
  skillsInput.addEventListener("input", () => {
    const inputValue = skillsInput.value.toLowerCase().trim();
    if (inputValue === "") {
      suggestionsList.style.display = "none";
      return;
    }

    const filteredSkills = availableSkills.filter(
      (skill) =>
        skill.toLowerCase().includes(inputValue) &&
        !selectedSkills.includes(skill)
    );

    if (filteredSkills.length > 0) {
      suggestionsList.innerHTML = filteredSkills
        .map((skill) => `<li class="suggestion-item">${skill}</li>`)
        .join("");
      suggestionsList.style.display = "block";
    } else {
      suggestionsList.style.display = "none";
    }
  });

  // Add a skill when a suggestion is clicked
  suggestionsList.addEventListener("click", (e) => {
    if (e.target.classList.contains("suggestion-item")) {
      const skill = e.target.textContent.trim();
      addSkill(skill);
      skillsInput.value = ""; // Clear input after selection
      suggestionsList.style.display = "none"; // Hide suggestions
    }
  });

  // Add skill when Enter is pressed
  skillsInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter" && skillsInput.value.trim()) {
      e.preventDefault();
      const skill = skillsInput.value.trim();
      addSkill(skill);
      skillsInput.value = ""; // Clear input after pressing Enter
    }
  });

  // Add skill function
  function addSkill(skill) {
    if (!selectedSkills.includes(skill)) {
      selectedSkills.push(skill);

      const skillTag = document.createElement("div");
      skillTag.className = "skill-tag";
      skillTag.innerHTML = `${skill}<span class="remove-skill" onclick="removeSkill('${skill}')">&times;</span>`;

      selectedSkillsContainer.appendChild(skillTag);
    }
  }

  // Remove skill function
  function removeSkill(skill) {
    // Remove from selectedSkills array
    selectedSkills = selectedSkills.filter((s) => s !== skill);

    // Add the skill back to suggestions list
    if (!availableSkills.includes(skill)) {
      availableSkills.push(skill);
    }

    // Update the suggestions list with the newly available skill
    skillsInput.dispatchEvent(new Event("input"));

    // Remove the skill tag from the selected skills container
    const skillTags = Array.from(
      selectedSkillsContainer.getElementsByClassName("skill-tag")
    );
    skillTags.forEach((tag) => {
      if (tag.textContent.includes(skill)) {
        tag.remove();
      }
    });
  }

  // Show popup for skills
  function showPopup() {
    const popup = document.getElementById("popup");
    popup.style.display = "block";
    document.body.style.overflow = "hidden"; // Disable scrolling when popup is open
  }

  // Close popup for skills
  function closePopup() {
    const popup = document.getElementById("popup");
    popup.style.display = "none";
    document.body.style.overflow = "auto"; // Enable scrolling again
  }

  // Close Post a Job Form
  function closeForm() {
    const formContainer = document.querySelector(".form-container");
    formContainer.style.display = "none"; // Hide the form when close is clicked
  }

  // Hide suggestions when clicking outside
  document.addEventListener("click", (e) => {
    if (!document.getElementById("skills-container").contains(e.target)) {
      suggestionsList.style.display = "none";
    }
  });

  function submitJobPost() {
    // Redirect to the desired page (for example, "get-started.html")
    window.location.href = "get-started.html"; // Replace with your target URL
  }
</script>

<!-- Styles for the Modal -->
<style>
  .form-header {
    text-align: center;
    margin-bottom: 10px;
  }

  .form-header h2 {
    margin: 0;
  }

  .form-content label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
  }

  .form-content input,
  .form-content select,
  .form-content textarea {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
  }

  .form-content textarea {
    resize: none;
  }

  .form-content button {
    width: 100%;
    padding: 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
  }

  .form-content button:hover {
    background-color: #0056b3;
  }

  @media (max-width: 768px) {
    .form-container {
      width: 90%;
    }
  }

  /* Styles for skill tags */
  .skill-tag {
    display: inline-block;
    background-color: #4caf50;
    color: white;
    padding: 5px 10px;
    margin: 5px;
    border-radius: 15px;
    font-size: 14px;
    cursor: pointer;
  }

  .remove-skill {
    margin-left: 10px;
    cursor: pointer;
    color: #fff;
  }

  .remove-skill:hover {
    color: red;
  }

  /* Suggestions List */
  .suggestions-list {
    list-style: none;
    padding: 0;
    margin-top: 5px;
    border: 1px solid #ccc;
    background-color: #fff;
    max-height: 200px;
    overflow-y: auto;
    display: none;
  }

  .suggestion-item {
    padding: 8px;
    cursor: pointer;
  }

  .suggestion-item:hover {
    background-color: #f0f0f0;
  }

  /* Pop-up for skill selection */
  #popup {
    display: none;
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #fff;
    padding: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    z-index: 9999;
    width: 80%;
    max-width: 500px;
  }

  #popup .popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  #popup .popup-header .close {
    font-size: 18px;
    cursor: pointer;
  }

  .form-group {
    display: flex;
    justify-content: space-between;
    gap: 20px;
  }

  .select-container {
    flex: 1; /* Make both select boxes take equal width */
  }

  .select-container label {
    display: block;
    margin-bottom: 5px;
  }

  .select-container select {
    width: 100%;
    padding: 8px;
    font-size: 16px;
    border-radius: 5px;
    border: 1px solid #ccc;
  }
  /* Remove Border from Get Started Button */
  .get-started-btn {
    border: none; /* Removes border */
    background-color: transparent; /* Optional: Transparent background */
    color: #007bff; /* Button text color */
    font-size: 1rem; /* Adjust font size */
    font-weight: bold; /* Make text bold */
    cursor: pointer; /* Pointer cursor on hover */
    transition: all 0.3s ease-in-out;
  }

  .get-started-btn:hover {
    color: #0c0c0c; /* Optional: Change color on hover */
  }
</style>

<section class="content">
  <div class="card">
    <i class="fa-solid fa-bullhorn"></i>
    <!-- Icon added -->
    <h1>Post Your Job</h1>
    <p>Create detailed job listings to attract the right candidates.</p>
    <!-- Get Started Button -->
    <button
      type="button"
      class="get-started-btn"
      data-bs-toggle="modal"
      data-bs-target="#exampleModal"
    >
      Get started →
    </button>
  </div>
</section>
{% endblock %}
<!-- JS -->
{% block js %}
<script src="{% static 'js/postajob.js' %}"></script>
{% endblock %}
